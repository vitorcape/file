<!DOCTYPE html>
<html lang="pt-br" class="h-100">
    <head>
        <title>Gerador apuração</title>
        <meta charset="utf-8">
        <meta name="author" content="Vitor Capelli">
        <link rel="icon" href="https://imgur.com/BbO77qp.png" type="image/png">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://kit.fontawesome.com/7957d4766d.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
        <link href="https://pro.fontawesome.com/releases/v5.15.4/css/all.css" rel="stylesheet"></link>
        <link href="https://kit-pro.fontawesome.com/releases/v6.1.1/css/pro.min.css" rel="stylesheet"></link>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://fonts.cdnfonts.com/css/poppins" rel="stylesheet">
        <link href="https://fonts.cdnfonts.com/css/montserrat" rel="stylesheet">
    </head>
    <style>
        .montserrat{font-family: Montserrat;}
        .poppins{font-family: Poppins;}
    </style>
    <body class="bg-light">
        <main class="container">
            <div class="py-5 text-center montserrat">
                <img class="roudend mb-3" src="https://imgur.com/BbO77qp.png" height="80" width="80">
                <h2>PODER CAPITAL</h2>
                <h4>Gerador apuração de eleição</h4>
            </div>
            <div class="row mb-2">
                <div class="col-4">
                    <form>
                        <div class="row mb-3">
                            <div class="col-sm-12 mb-3">
                                <label for="titulo" class="form-label">Nome das eleições</label>
                                <input type="text" class="form-control" id="titulo" placeholder="Eleições gerais 2006">
                            </div>
                            <div class="col-sm-4">
                                <label for="percentual" class="form-label">Porcentagem</label>
                                <input type="number" class="form-control" id="percentual" placeholder="25">
                            </div>
                            <div class="col-sm-4">
                                <label for="votos" class="form-label">Votos totais</label>
                                <input type="number" class="form-control" id="voto" placeholder="80">
                            </div>
                            <div class="col-sm-4">
                                <label for="nulo" class="form-label">Votos nulos</label>
                                <input type="number" class="form-control" id="nulos" placeholder="10">
                            </div>
                        </div>
                        <h4 class="mt-5 mb-3 text-center poppins">Primeiro candidato</h4>
                        <div class="mb-3">
                            <label for="image1" class="form-label">Imagem candidato</label>
                            <input type="url" class="form-control" id="imagem1" placeholder="imgur.com">
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="nome1" class="form-label">Nome candidato</label>
                                <input type="text" class="form-control" id="nome1" placeholder="Vitor Capelli">
                            </div>
                            <div class="col-sm-6">
                                <label for="partido1" class="form-label">Partido</label>
                                <input type="text" class="form-control" id="partido1" placeholder="PT ou PT/PDT">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="voto1" class="form-label">Quantidade de votos</label>
                            <input type="number" class="form-control" id="voto1" placeholder="25">
                        </div>
                        <h4 class="mt-5 mb-3 text-center poppins">Segundo candidato</h4>
                        <div class="mb-3">
                            <label for="image2" class="form-label">Imagem candidato</label>
                            <input type="url" class="form-control" id="imagem2" placeholder="imgur.com">
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label for="nome2" class="form-label">Nome candidato</label>
                                <input type="text" class="form-control" id="nome2" placeholder="Amarildo do Hospital">
                            </div>
                            <div class="col-sm-6">
                                <label for="partido2" class="form-label">Partido</label>
                                <input type="text" class="form-control" id="partido2" placeholder="PL ou PL/MDB">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="voto2" class="form-label">Quantidade de votos</label>
                            <input type="number" class="form-control" id="voto2" placeholder="18">
                        </div>
                    </form>
                    <p class="text-center">Criado <i class="fa-regular fa-code"></i> por Vitor Capelli</p>
                </div>
                <div class="col-8">
                    <div class="card p-4 text-left" id="print">
                        <div id="apuracao" class="mb-3">
                            <h3 class="text-uppercase mb-4 montserrat" id="title"></h3>
                            <div class="progress">
                                <div class="progress-bar bg-success" id="barra-total" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <p><b id="title-percentual">25%</b> das urnas apuradas</p>
                        </div>
                        <div class="row mb-5" id="candidato1">
                            <div class="col-6 col-sm-2 px-0">
                                <div id="image1" class="img-thumbnail" style="width: 120px; height: 120px; background-image: url(https://imgur.com/8zLc8op);background-size: cover;background-position: center;"></div>
                            </div>
                            <div class="col-6 col-sm-10 row">
                                <div class="col-10 poppins">
                                    <h3 id="cad-nome1"></h3>
                                    <p id="cad-par1">PT/PDT</p>
                                </div>
                                <div class="col-2 text-center poppins">
                                    <h4 id="per1">50,90%</h4>
                                    <p id="cad-voto1">25 votos</p>
                                </div>
                                <div class="progress mx-2 px-0" style="height: 5px">
                                    <div class="progress-bar" id="barra1" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-5" id="candidato2">
                            <div class="col-6 col-sm-2 px-0">
                                <div id="image2" class="img-thumbnail" style="width: 120px; height: 120px; background-image: url(https://imgur.com/tt3kb32);background-size: cover;background-position: center;"></div>
                            </div>
                            <div class="col-6 col-sm-10 row">
                                <div class="col-10 poppins">
                                    <h3 id="cad-nome2"></h3>
                                    <p id="cad-par2">PL/MDB</p>
                                </div>
                                <div class="col-2 text-center poppins">
                                    <h4 id="per2">49,10%</h4>
                                    <p id="cad-voto2">15 votos</p>
                                </div>
                                <div class="progress mx-2 px-0" style="height: 5px">
                                    <div class="progress-bar" id="barra2" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                        <div class=" mt-3">
                            <div class="m-0 p-0">Votos totais: <b id="voto-total">40</b></div>
                            <div class="m-0 p-0">Votos brancos/nulos: <b id="voto-nulo">10</b></div>
                        </div>
                    </div>
                    <div class="d-grid gap-2 my-5">
                        <button class="btn btn-dark" type="button" id="captureButton">Criar imagem</button>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div id="imageContainer" class="m-3 text-center" style="height: 650px;"></div>
            </div>
        </main>
        <script type="text/javascript">
            (function($) {
    'use strict';

    $(function () {
        function updateData() {
            var novoTitulo = $("#titulo").val() || $("#titulo").attr("placeholder");
            var novoPercentual = $("#percentual").val() || $("#percentual").attr("placeholder");
            var novoTotal = $("#voto").val() || $("#voto").attr("placeholder");
            var novoNulo = $("#nulos").val() || $("#nulos").attr("placeholder");

            $("#title").text(novoTitulo);
            $("#title-percentual").text(novoPercentual + "%");
            $("#barra-total").css("width", novoPercentual + "%");
            $("#voto-total").text(novoTotal);
            $("#voto-nulo").text(novoNulo);
        }

        // Atualizar ao carregar a página
        updateData();

        // Atualizar enquanto digita nos campos
        $("#titulo, #percentual, #voto, #nulos").on("input", function () {
            updateData();
        });
    });
})(jQuery);


        </script>
        <script type="text/javascript">
            (function($) {
    'use strict';

    $(function () {
    function updateData() {
        var Imagem1 = $("#imagem1").val();
        var Nome1 = $("#nome1").val() || $("#nome1").attr("placeholder");
        var Partido1 = $("#partido1").val() || $("#partido1").attr("placeholder");
        var Voto1 = $("#voto1").val() || $("#voto1").attr("placeholder");
        var Barra1 = $("#barra1").val() || $("#barra1").attr("placeholder");
        var Total = $("#voto").val() || $("#voto").attr("placeholder");
        var Nulo = $("#nulos").val() || $("#nulos").attr("placeholder");

        var Valido = Total - Nulo;
        var Perc1 = (Voto1 * 100) / Valido;
        var Perc1Arredondado = Perc1.toFixed(2);

        $("#image1").css("background-image", "url('" + Imagem1 + "')");
        $("#cad-nome1").text(Nome1);
        $("#cad-par1").text(Partido1);
        $("#cad-voto1").text(Voto1 + " votos");
        $("#per1").text(Perc1Arredondado + "%");
        $("#barra1").css("width", Perc1Arredondado + "%");

        var Imagem2 = $("#imagem2").val();
        var Nome2 = $("#nome2").val() || $("#nome2").attr("placeholder");
        var Partido2 = $("#partido2").val() || $("#partido2").attr("placeholder");
        var Voto2 = $("#voto2").val() || $("#voto2").attr("placeholder");
        var Barra2 = $("#barra2").val() || $("#barra2").attr("placeholder");

        var Valido = Total - Nulo;
        var Perc2 = (Voto2 * 100) / Valido;
        var Perc2Arredondado = Perc2.toFixed(2);

        $("#image2").css("background-image", "url('" + Imagem2 + "')");
        $("#cad-nome2").text(Nome2);
        $("#cad-par2").text(Partido2);
        $("#cad-voto2").text(Voto2 + " votos");
        $("#per2").text(Perc2Arredondado + "%");
        $("#barra2").css("width", Perc2Arredondado + "%");

        if (Perc2Arredondado > Perc1Arredondado) {
    $("#candidato2").insertBefore("#candidato1");
    $("#barra2").addClass("bg-success");
    $("#barra1").addClass("bg-secondary");
    $("#barra2").removeClass("bg-secondary");
    $("#barra1").removeClass("bg-success");
} else {
    $("#candidato1").insertBefore("#candidato2");
    $("#barra2").addClass("bg-secondary");
    $("#barra1").addClass("bg-success");
    $("#barra2").removeClass("bg-success");
    $("#barra1").removeClass("bg-secondary");
}

    }

    // Atualizar ao carregar a página
    updateData();

    // Atualizar enquanto digita nos campos
    $("#imagem1, #nome1, #partido1, #voto1, #barra1, #imagem2, #nome2, #partido2, #voto2, #barra2").on("input", function () {
        updateData();
    });
});


})(jQuery);

        </script>
        <script>
            $("#captureButton").click(function() {
                    html2canvas($("#print").get(0), {
                    allowTaint: true,
                    backgroundColor: null,
                      imageTimeout: 0,
                    scale: 1
                  })
            .then(function (canvas) {if($("#print").has("canvas")) {
                        $("canvas").remove();
                      }
            
            $("#imageContainer").append(canvas);
            })
                     .catch(function (err) { console.log(err); });
                 });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
    </body>
</html>
